{"ast":null,"code":"import { __values, __spreadArray, __read } from './_virtual/_tslib.js';\nimport { flatten } from './utils.js';\n\nvar isLeafNode = function isLeafNode(stateNode) {\n  return stateNode.type === 'atomic' || stateNode.type === 'final';\n};\n\nfunction getChildren(stateNode) {\n  return Object.keys(stateNode.states).map(function (key) {\n    return stateNode.states[key];\n  }).filter(function (sn) {\n    return sn.type !== 'history';\n  });\n}\n\nfunction getAllStateNodes(stateNode) {\n  var stateNodes = [stateNode];\n\n  if (isLeafNode(stateNode)) {\n    return stateNodes;\n  }\n\n  return stateNodes.concat(flatten(getChildren(stateNode).map(getAllStateNodes)));\n}\n\nfunction getConfiguration(prevStateNodes, stateNodes) {\n  var e_1, _a, e_2, _b, e_3, _c, e_4, _d;\n\n  var prevConfiguration = new Set(prevStateNodes);\n  var prevAdjList = getAdjList(prevConfiguration);\n  var configuration = new Set(stateNodes);\n\n  try {\n    // add all ancestors\n    for (var configuration_1 = __values(configuration), configuration_1_1 = configuration_1.next(); !configuration_1_1.done; configuration_1_1 = configuration_1.next()) {\n      var s = configuration_1_1.value;\n      var m = s.parent;\n\n      while (m && !configuration.has(m)) {\n        configuration.add(m);\n        m = m.parent;\n      }\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (configuration_1_1 && !configuration_1_1.done && (_a = configuration_1.return)) _a.call(configuration_1);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n\n  var adjList = getAdjList(configuration);\n\n  try {\n    // add descendants\n    for (var configuration_2 = __values(configuration), configuration_2_1 = configuration_2.next(); !configuration_2_1.done; configuration_2_1 = configuration_2.next()) {\n      var s = configuration_2_1.value; // if previously active, add existing child nodes\n\n      if (s.type === 'compound' && (!adjList.get(s) || !adjList.get(s).length)) {\n        if (prevAdjList.get(s)) {\n          prevAdjList.get(s).forEach(function (sn) {\n            return configuration.add(sn);\n          });\n        } else {\n          s.initialStateNodes.forEach(function (sn) {\n            return configuration.add(sn);\n          });\n        }\n      } else {\n        if (s.type === 'parallel') {\n          try {\n            for (var _e = (e_3 = void 0, __values(getChildren(s))), _f = _e.next(); !_f.done; _f = _e.next()) {\n              var child = _f.value;\n\n              if (!configuration.has(child)) {\n                configuration.add(child);\n\n                if (prevAdjList.get(child)) {\n                  prevAdjList.get(child).forEach(function (sn) {\n                    return configuration.add(sn);\n                  });\n                } else {\n                  child.initialStateNodes.forEach(function (sn) {\n                    return configuration.add(sn);\n                  });\n                }\n              }\n            }\n          } catch (e_3_1) {\n            e_3 = {\n              error: e_3_1\n            };\n          } finally {\n            try {\n              if (_f && !_f.done && (_c = _e.return)) _c.call(_e);\n            } finally {\n              if (e_3) throw e_3.error;\n            }\n          }\n        }\n      }\n    }\n  } catch (e_2_1) {\n    e_2 = {\n      error: e_2_1\n    };\n  } finally {\n    try {\n      if (configuration_2_1 && !configuration_2_1.done && (_b = configuration_2.return)) _b.call(configuration_2);\n    } finally {\n      if (e_2) throw e_2.error;\n    }\n  }\n\n  try {\n    // add all ancestors\n    for (var configuration_3 = __values(configuration), configuration_3_1 = configuration_3.next(); !configuration_3_1.done; configuration_3_1 = configuration_3.next()) {\n      var s = configuration_3_1.value;\n      var m = s.parent;\n\n      while (m && !configuration.has(m)) {\n        configuration.add(m);\n        m = m.parent;\n      }\n    }\n  } catch (e_4_1) {\n    e_4 = {\n      error: e_4_1\n    };\n  } finally {\n    try {\n      if (configuration_3_1 && !configuration_3_1.done && (_d = configuration_3.return)) _d.call(configuration_3);\n    } finally {\n      if (e_4) throw e_4.error;\n    }\n  }\n\n  return configuration;\n}\n\nfunction getValueFromAdj(baseNode, adjList) {\n  var childStateNodes = adjList.get(baseNode);\n\n  if (!childStateNodes) {\n    return {}; // todo: fix?\n  }\n\n  if (baseNode.type === 'compound') {\n    var childStateNode = childStateNodes[0];\n\n    if (childStateNode) {\n      if (isLeafNode(childStateNode)) {\n        return childStateNode.key;\n      }\n    } else {\n      return {};\n    }\n  }\n\n  var stateValue = {};\n  childStateNodes.forEach(function (csn) {\n    stateValue[csn.key] = getValueFromAdj(csn, adjList);\n  });\n  return stateValue;\n}\n\nfunction getAdjList(configuration) {\n  var e_5, _a;\n\n  var adjList = new Map();\n\n  try {\n    for (var configuration_4 = __values(configuration), configuration_4_1 = configuration_4.next(); !configuration_4_1.done; configuration_4_1 = configuration_4.next()) {\n      var s = configuration_4_1.value;\n\n      if (!adjList.has(s)) {\n        adjList.set(s, []);\n      }\n\n      if (s.parent) {\n        if (!adjList.has(s.parent)) {\n          adjList.set(s.parent, []);\n        }\n\n        adjList.get(s.parent).push(s);\n      }\n    }\n  } catch (e_5_1) {\n    e_5 = {\n      error: e_5_1\n    };\n  } finally {\n    try {\n      if (configuration_4_1 && !configuration_4_1.done && (_a = configuration_4.return)) _a.call(configuration_4);\n    } finally {\n      if (e_5) throw e_5.error;\n    }\n  }\n\n  return adjList;\n}\n\nfunction getValue(rootNode, configuration) {\n  var config = getConfiguration([rootNode], configuration);\n  return getValueFromAdj(rootNode, getAdjList(config));\n}\n\nfunction has(iterable, item) {\n  if (Array.isArray(iterable)) {\n    return iterable.some(function (member) {\n      return member === item;\n    });\n  }\n\n  if (iterable instanceof Set) {\n    return iterable.has(item);\n  }\n\n  return false; // TODO: fix\n}\n\nfunction nextEvents(configuration) {\n  return __spreadArray([], __read(new Set(flatten(__spreadArray([], __read(configuration.map(function (sn) {\n    return sn.ownEvents;\n  })), false)))), false);\n}\n\nfunction isInFinalState(configuration, stateNode) {\n  if (stateNode.type === 'compound') {\n    return getChildren(stateNode).some(function (s) {\n      return s.type === 'final' && has(configuration, s);\n    });\n  }\n\n  if (stateNode.type === 'parallel') {\n    return getChildren(stateNode).every(function (sn) {\n      return isInFinalState(configuration, sn);\n    });\n  }\n\n  return false;\n}\n\nfunction getMeta(configuration) {\n  if (configuration === void 0) {\n    configuration = [];\n  }\n\n  return configuration.reduce(function (acc, stateNode) {\n    if (stateNode.meta !== undefined) {\n      acc[stateNode.id] = stateNode.meta;\n    }\n\n    return acc;\n  }, {});\n}\n\nfunction getTagsFromConfiguration(configuration) {\n  return new Set(flatten(configuration.map(function (sn) {\n    return sn.tags;\n  })));\n}\n\nexport { getAdjList, getAllStateNodes, getChildren, getConfiguration, getMeta, getTagsFromConfiguration, getValue, has, isInFinalState, isLeafNode, nextEvents };","map":{"version":3,"names":["__values","__spreadArray","__read","flatten","isLeafNode","stateNode","type","getChildren","Object","keys","states","map","key","filter","sn","getAllStateNodes","stateNodes","concat","getConfiguration","prevStateNodes","e_1","_a","e_2","_b","e_3","_c","e_4","_d","prevConfiguration","Set","prevAdjList","getAdjList","configuration","configuration_1","configuration_1_1","next","done","s","value","m","parent","has","add","e_1_1","error","return","call","adjList","configuration_2","configuration_2_1","get","length","forEach","initialStateNodes","_e","_f","child","e_3_1","e_2_1","configuration_3","configuration_3_1","e_4_1","getValueFromAdj","baseNode","childStateNodes","childStateNode","stateValue","csn","e_5","Map","configuration_4","configuration_4_1","set","push","e_5_1","getValue","rootNode","config","iterable","item","Array","isArray","some","member","nextEvents","ownEvents","isInFinalState","every","getMeta","reduce","acc","meta","undefined","id","getTagsFromConfiguration","tags"],"sources":["/project/xstate-getting-started/node_modules/xstate/es/stateUtils.js"],"sourcesContent":["import { __values, __spreadArray, __read } from './_virtual/_tslib.js';\nimport { flatten } from './utils.js';\n\nvar isLeafNode = function (stateNode) {\n  return stateNode.type === 'atomic' || stateNode.type === 'final';\n};\nfunction getChildren(stateNode) {\n  return Object.keys(stateNode.states).map(function (key) {\n    return stateNode.states[key];\n  }).filter(function (sn) {\n    return sn.type !== 'history';\n  });\n}\nfunction getAllStateNodes(stateNode) {\n  var stateNodes = [stateNode];\n\n  if (isLeafNode(stateNode)) {\n    return stateNodes;\n  }\n\n  return stateNodes.concat(flatten(getChildren(stateNode).map(getAllStateNodes)));\n}\nfunction getConfiguration(prevStateNodes, stateNodes) {\n  var e_1, _a, e_2, _b, e_3, _c, e_4, _d;\n\n  var prevConfiguration = new Set(prevStateNodes);\n  var prevAdjList = getAdjList(prevConfiguration);\n  var configuration = new Set(stateNodes);\n\n  try {\n    // add all ancestors\n    for (var configuration_1 = __values(configuration), configuration_1_1 = configuration_1.next(); !configuration_1_1.done; configuration_1_1 = configuration_1.next()) {\n      var s = configuration_1_1.value;\n      var m = s.parent;\n\n      while (m && !configuration.has(m)) {\n        configuration.add(m);\n        m = m.parent;\n      }\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (configuration_1_1 && !configuration_1_1.done && (_a = configuration_1.return)) _a.call(configuration_1);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n\n  var adjList = getAdjList(configuration);\n\n  try {\n    // add descendants\n    for (var configuration_2 = __values(configuration), configuration_2_1 = configuration_2.next(); !configuration_2_1.done; configuration_2_1 = configuration_2.next()) {\n      var s = configuration_2_1.value; // if previously active, add existing child nodes\n\n      if (s.type === 'compound' && (!adjList.get(s) || !adjList.get(s).length)) {\n        if (prevAdjList.get(s)) {\n          prevAdjList.get(s).forEach(function (sn) {\n            return configuration.add(sn);\n          });\n        } else {\n          s.initialStateNodes.forEach(function (sn) {\n            return configuration.add(sn);\n          });\n        }\n      } else {\n        if (s.type === 'parallel') {\n          try {\n            for (var _e = (e_3 = void 0, __values(getChildren(s))), _f = _e.next(); !_f.done; _f = _e.next()) {\n              var child = _f.value;\n\n              if (!configuration.has(child)) {\n                configuration.add(child);\n\n                if (prevAdjList.get(child)) {\n                  prevAdjList.get(child).forEach(function (sn) {\n                    return configuration.add(sn);\n                  });\n                } else {\n                  child.initialStateNodes.forEach(function (sn) {\n                    return configuration.add(sn);\n                  });\n                }\n              }\n            }\n          } catch (e_3_1) {\n            e_3 = {\n              error: e_3_1\n            };\n          } finally {\n            try {\n              if (_f && !_f.done && (_c = _e.return)) _c.call(_e);\n            } finally {\n              if (e_3) throw e_3.error;\n            }\n          }\n        }\n      }\n    }\n  } catch (e_2_1) {\n    e_2 = {\n      error: e_2_1\n    };\n  } finally {\n    try {\n      if (configuration_2_1 && !configuration_2_1.done && (_b = configuration_2.return)) _b.call(configuration_2);\n    } finally {\n      if (e_2) throw e_2.error;\n    }\n  }\n\n  try {\n    // add all ancestors\n    for (var configuration_3 = __values(configuration), configuration_3_1 = configuration_3.next(); !configuration_3_1.done; configuration_3_1 = configuration_3.next()) {\n      var s = configuration_3_1.value;\n      var m = s.parent;\n\n      while (m && !configuration.has(m)) {\n        configuration.add(m);\n        m = m.parent;\n      }\n    }\n  } catch (e_4_1) {\n    e_4 = {\n      error: e_4_1\n    };\n  } finally {\n    try {\n      if (configuration_3_1 && !configuration_3_1.done && (_d = configuration_3.return)) _d.call(configuration_3);\n    } finally {\n      if (e_4) throw e_4.error;\n    }\n  }\n\n  return configuration;\n}\n\nfunction getValueFromAdj(baseNode, adjList) {\n  var childStateNodes = adjList.get(baseNode);\n\n  if (!childStateNodes) {\n    return {}; // todo: fix?\n  }\n\n  if (baseNode.type === 'compound') {\n    var childStateNode = childStateNodes[0];\n\n    if (childStateNode) {\n      if (isLeafNode(childStateNode)) {\n        return childStateNode.key;\n      }\n    } else {\n      return {};\n    }\n  }\n\n  var stateValue = {};\n  childStateNodes.forEach(function (csn) {\n    stateValue[csn.key] = getValueFromAdj(csn, adjList);\n  });\n  return stateValue;\n}\n\nfunction getAdjList(configuration) {\n  var e_5, _a;\n\n  var adjList = new Map();\n\n  try {\n    for (var configuration_4 = __values(configuration), configuration_4_1 = configuration_4.next(); !configuration_4_1.done; configuration_4_1 = configuration_4.next()) {\n      var s = configuration_4_1.value;\n\n      if (!adjList.has(s)) {\n        adjList.set(s, []);\n      }\n\n      if (s.parent) {\n        if (!adjList.has(s.parent)) {\n          adjList.set(s.parent, []);\n        }\n\n        adjList.get(s.parent).push(s);\n      }\n    }\n  } catch (e_5_1) {\n    e_5 = {\n      error: e_5_1\n    };\n  } finally {\n    try {\n      if (configuration_4_1 && !configuration_4_1.done && (_a = configuration_4.return)) _a.call(configuration_4);\n    } finally {\n      if (e_5) throw e_5.error;\n    }\n  }\n\n  return adjList;\n}\nfunction getValue(rootNode, configuration) {\n  var config = getConfiguration([rootNode], configuration);\n  return getValueFromAdj(rootNode, getAdjList(config));\n}\nfunction has(iterable, item) {\n  if (Array.isArray(iterable)) {\n    return iterable.some(function (member) {\n      return member === item;\n    });\n  }\n\n  if (iterable instanceof Set) {\n    return iterable.has(item);\n  }\n\n  return false; // TODO: fix\n}\nfunction nextEvents(configuration) {\n  return __spreadArray([], __read(new Set(flatten(__spreadArray([], __read(configuration.map(function (sn) {\n    return sn.ownEvents;\n  })), false)))), false);\n}\nfunction isInFinalState(configuration, stateNode) {\n  if (stateNode.type === 'compound') {\n    return getChildren(stateNode).some(function (s) {\n      return s.type === 'final' && has(configuration, s);\n    });\n  }\n\n  if (stateNode.type === 'parallel') {\n    return getChildren(stateNode).every(function (sn) {\n      return isInFinalState(configuration, sn);\n    });\n  }\n\n  return false;\n}\nfunction getMeta(configuration) {\n  if (configuration === void 0) {\n    configuration = [];\n  }\n\n  return configuration.reduce(function (acc, stateNode) {\n    if (stateNode.meta !== undefined) {\n      acc[stateNode.id] = stateNode.meta;\n    }\n\n    return acc;\n  }, {});\n}\nfunction getTagsFromConfiguration(configuration) {\n  return new Set(flatten(configuration.map(function (sn) {\n    return sn.tags;\n  })));\n}\n\nexport { getAdjList, getAllStateNodes, getChildren, getConfiguration, getMeta, getTagsFromConfiguration, getValue, has, isInFinalState, isLeafNode, nextEvents };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}