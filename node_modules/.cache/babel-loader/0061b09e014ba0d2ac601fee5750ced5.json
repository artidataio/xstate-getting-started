{"ast":null,"code":"import { __values, __spreadArray, __read, __assign } from './_virtual/_tslib.js';\nimport { DEFAULT_GUARD_TYPE, TARGETLESS_KEY, STATE_DELIMITER } from './constants.js';\nimport { IS_PRODUCTION } from './environment.js';\n\nvar _a;\n\nfunction keys(value) {\n  return Object.keys(value);\n}\n\nfunction matchesState(parentStateId, childStateId, delimiter) {\n  if (delimiter === void 0) {\n    delimiter = STATE_DELIMITER;\n  }\n\n  var parentStateValue = toStateValue(parentStateId, delimiter);\n  var childStateValue = toStateValue(childStateId, delimiter);\n\n  if (isString(childStateValue)) {\n    if (isString(parentStateValue)) {\n      return childStateValue === parentStateValue;\n    } // Parent more specific than child\n\n\n    return false;\n  }\n\n  if (isString(parentStateValue)) {\n    return parentStateValue in childStateValue;\n  }\n\n  return Object.keys(parentStateValue).every(function (key) {\n    if (!(key in childStateValue)) {\n      return false;\n    }\n\n    return matchesState(parentStateValue[key], childStateValue[key]);\n  });\n}\n\nfunction getEventType(event) {\n  try {\n    return isString(event) || typeof event === 'number' ? \"\".concat(event) : event.type;\n  } catch (e) {\n    throw new Error('Events must be strings or objects with a string event.type property.');\n  }\n}\n\nfunction getActionType(action) {\n  try {\n    return isString(action) || typeof action === 'number' ? \"\".concat(action) : isFunction(action) ? action.name : action.type;\n  } catch (e) {\n    throw new Error('Actions must be strings or objects with a string action.type property.');\n  }\n}\n\nfunction toStatePath(stateId, delimiter) {\n  try {\n    if (isArray(stateId)) {\n      return stateId;\n    }\n\n    return stateId.toString().split(delimiter);\n  } catch (e) {\n    throw new Error(\"'\".concat(stateId, \"' is not a valid state path.\"));\n  }\n}\n\nfunction isStateLike(state) {\n  return typeof state === 'object' && 'value' in state && 'context' in state && 'event' in state && '_event' in state;\n}\n\nfunction toStateValue(stateValue, delimiter) {\n  if (isStateLike(stateValue)) {\n    return stateValue.value;\n  }\n\n  if (isArray(stateValue)) {\n    return pathToStateValue(stateValue);\n  }\n\n  if (typeof stateValue !== 'string') {\n    return stateValue;\n  }\n\n  var statePath = toStatePath(stateValue, delimiter);\n  return pathToStateValue(statePath);\n}\n\nfunction pathToStateValue(statePath) {\n  if (statePath.length === 1) {\n    return statePath[0];\n  }\n\n  var value = {};\n  var marker = value;\n\n  for (var i = 0; i < statePath.length - 1; i++) {\n    if (i === statePath.length - 2) {\n      marker[statePath[i]] = statePath[i + 1];\n    } else {\n      marker[statePath[i]] = {};\n      marker = marker[statePath[i]];\n    }\n  }\n\n  return value;\n}\n\nfunction mapValues(collection, iteratee) {\n  var result = {};\n  var collectionKeys = Object.keys(collection);\n\n  for (var i = 0; i < collectionKeys.length; i++) {\n    var key = collectionKeys[i];\n    result[key] = iteratee(collection[key], key, collection, i);\n  }\n\n  return result;\n}\n\nfunction mapFilterValues(collection, iteratee, predicate) {\n  var e_1, _a;\n\n  var result = {};\n\n  try {\n    for (var _b = __values(Object.keys(collection)), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var key = _c.value;\n      var item = collection[key];\n\n      if (!predicate(item)) {\n        continue;\n      }\n\n      result[key] = iteratee(item, key, collection);\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n\n  return result;\n}\n/**\r\n * Retrieves a value at the given path.\r\n * @param props The deep path to the prop of the desired value\r\n */\n\n\nvar path = function path(props) {\n  return function (object) {\n    var e_2, _a;\n\n    var result = object;\n\n    try {\n      for (var props_1 = __values(props), props_1_1 = props_1.next(); !props_1_1.done; props_1_1 = props_1.next()) {\n        var prop = props_1_1.value;\n        result = result[prop];\n      }\n    } catch (e_2_1) {\n      e_2 = {\n        error: e_2_1\n      };\n    } finally {\n      try {\n        if (props_1_1 && !props_1_1.done && (_a = props_1.return)) _a.call(props_1);\n      } finally {\n        if (e_2) throw e_2.error;\n      }\n    }\n\n    return result;\n  };\n};\n/**\r\n * Retrieves a value at the given path via the nested accessor prop.\r\n * @param props The deep path to the prop of the desired value\r\n */\n\n\nfunction nestedPath(props, accessorProp) {\n  return function (object) {\n    var e_3, _a;\n\n    var result = object;\n\n    try {\n      for (var props_2 = __values(props), props_2_1 = props_2.next(); !props_2_1.done; props_2_1 = props_2.next()) {\n        var prop = props_2_1.value;\n        result = result[accessorProp][prop];\n      }\n    } catch (e_3_1) {\n      e_3 = {\n        error: e_3_1\n      };\n    } finally {\n      try {\n        if (props_2_1 && !props_2_1.done && (_a = props_2.return)) _a.call(props_2);\n      } finally {\n        if (e_3) throw e_3.error;\n      }\n    }\n\n    return result;\n  };\n}\n\nfunction toStatePaths(stateValue) {\n  if (!stateValue) {\n    return [[]];\n  }\n\n  if (isString(stateValue)) {\n    return [[stateValue]];\n  }\n\n  var result = flatten(Object.keys(stateValue).map(function (key) {\n    var subStateValue = stateValue[key];\n\n    if (typeof subStateValue !== 'string' && (!subStateValue || !Object.keys(subStateValue).length)) {\n      return [[key]];\n    }\n\n    return toStatePaths(stateValue[key]).map(function (subPath) {\n      return [key].concat(subPath);\n    });\n  }));\n  return result;\n}\n\nfunction pathsToStateValue(paths) {\n  var e_4, _a;\n\n  var result = {};\n\n  if (paths && paths.length === 1 && paths[0].length === 1) {\n    return paths[0][0];\n  }\n\n  try {\n    for (var paths_1 = __values(paths), paths_1_1 = paths_1.next(); !paths_1_1.done; paths_1_1 = paths_1.next()) {\n      var currentPath = paths_1_1.value;\n      var marker = result; // tslint:disable-next-line:prefer-for-of\n\n      for (var i = 0; i < currentPath.length; i++) {\n        var subPath = currentPath[i];\n\n        if (i === currentPath.length - 2) {\n          marker[subPath] = currentPath[i + 1];\n          break;\n        }\n\n        marker[subPath] = marker[subPath] || {};\n        marker = marker[subPath];\n      }\n    }\n  } catch (e_4_1) {\n    e_4 = {\n      error: e_4_1\n    };\n  } finally {\n    try {\n      if (paths_1_1 && !paths_1_1.done && (_a = paths_1.return)) _a.call(paths_1);\n    } finally {\n      if (e_4) throw e_4.error;\n    }\n  }\n\n  return result;\n}\n\nfunction flatten(array) {\n  var _a;\n\n  return (_a = []).concat.apply(_a, __spreadArray([], __read(array), false));\n}\n\nfunction toArrayStrict(value) {\n  if (isArray(value)) {\n    return value;\n  }\n\n  return [value];\n}\n\nfunction toArray(value) {\n  if (value === undefined) {\n    return [];\n  }\n\n  return toArrayStrict(value);\n}\n\nfunction mapContext(mapper, context, _event) {\n  var e_5, _a;\n\n  if (isFunction(mapper)) {\n    return mapper(context, _event.data);\n  }\n\n  var result = {};\n\n  try {\n    for (var _b = __values(Object.keys(mapper)), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var key = _c.value;\n      var subMapper = mapper[key];\n\n      if (isFunction(subMapper)) {\n        result[key] = subMapper(context, _event.data);\n      } else {\n        result[key] = subMapper;\n      }\n    }\n  } catch (e_5_1) {\n    e_5 = {\n      error: e_5_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n    } finally {\n      if (e_5) throw e_5.error;\n    }\n  }\n\n  return result;\n}\n\nfunction isBuiltInEvent(eventType) {\n  return /^(done|error)\\./.test(eventType);\n}\n\nfunction isPromiseLike(value) {\n  if (value instanceof Promise) {\n    return true;\n  } // Check if shape matches the Promise/A+ specification for a \"thenable\".\n\n\n  if (value !== null && (isFunction(value) || typeof value === 'object') && isFunction(value.then)) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction isBehavior(value) {\n  return value !== null && typeof value === 'object' && 'transition' in value && typeof value.transition === 'function';\n}\n\nfunction partition(items, predicate) {\n  var e_6, _a;\n\n  var _b = __read([[], []], 2),\n      truthy = _b[0],\n      falsy = _b[1];\n\n  try {\n    for (var items_1 = __values(items), items_1_1 = items_1.next(); !items_1_1.done; items_1_1 = items_1.next()) {\n      var item = items_1_1.value;\n\n      if (predicate(item)) {\n        truthy.push(item);\n      } else {\n        falsy.push(item);\n      }\n    }\n  } catch (e_6_1) {\n    e_6 = {\n      error: e_6_1\n    };\n  } finally {\n    try {\n      if (items_1_1 && !items_1_1.done && (_a = items_1.return)) _a.call(items_1);\n    } finally {\n      if (e_6) throw e_6.error;\n    }\n  }\n\n  return [truthy, falsy];\n}\n\nfunction updateHistoryStates(hist, stateValue) {\n  return mapValues(hist.states, function (subHist, key) {\n    if (!subHist) {\n      return undefined;\n    }\n\n    var subStateValue = (isString(stateValue) ? undefined : stateValue[key]) || (subHist ? subHist.current : undefined);\n\n    if (!subStateValue) {\n      return undefined;\n    }\n\n    return {\n      current: subStateValue,\n      states: updateHistoryStates(subHist, subStateValue)\n    };\n  });\n}\n\nfunction updateHistoryValue(hist, stateValue) {\n  return {\n    current: stateValue,\n    states: updateHistoryStates(hist, stateValue)\n  };\n}\n\nfunction updateContext(context, _event, assignActions, state) {\n  if (!IS_PRODUCTION) {\n    warn(!!context, 'Attempting to update undefined context');\n  }\n\n  var updatedContext = context ? assignActions.reduce(function (acc, assignAction) {\n    var e_7, _a;\n\n    var assignment = assignAction.assignment;\n    var meta = {\n      state: state,\n      action: assignAction,\n      _event: _event\n    };\n    var partialUpdate = {};\n\n    if (isFunction(assignment)) {\n      partialUpdate = assignment(acc, _event.data, meta);\n    } else {\n      try {\n        for (var _b = __values(Object.keys(assignment)), _c = _b.next(); !_c.done; _c = _b.next()) {\n          var key = _c.value;\n          var propAssignment = assignment[key];\n          partialUpdate[key] = isFunction(propAssignment) ? propAssignment(acc, _event.data, meta) : propAssignment;\n        }\n      } catch (e_7_1) {\n        e_7 = {\n          error: e_7_1\n        };\n      } finally {\n        try {\n          if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        } finally {\n          if (e_7) throw e_7.error;\n        }\n      }\n    }\n\n    return Object.assign({}, acc, partialUpdate);\n  }, context) : context;\n  return updatedContext;\n} // tslint:disable-next-line:no-empty\n\n\nvar warn = function warn() {};\n\nif (!IS_PRODUCTION) {\n  warn = function warn(condition, message) {\n    var error = condition instanceof Error ? condition : undefined;\n\n    if (!error && condition) {\n      return;\n    }\n\n    if (console !== undefined) {\n      var args = [\"Warning: \".concat(message)];\n\n      if (error) {\n        args.push(error);\n      } // tslint:disable-next-line:no-console\n\n\n      console.warn.apply(console, args);\n    }\n  };\n}\n\nfunction isArray(value) {\n  return Array.isArray(value);\n} // tslint:disable-next-line:ban-types\n\n\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\n\nfunction isString(value) {\n  return typeof value === 'string';\n}\n\nfunction toGuard(condition, guardMap) {\n  if (!condition) {\n    return undefined;\n  }\n\n  if (isString(condition)) {\n    return {\n      type: DEFAULT_GUARD_TYPE,\n      name: condition,\n      predicate: guardMap ? guardMap[condition] : undefined\n    };\n  }\n\n  if (isFunction(condition)) {\n    return {\n      type: DEFAULT_GUARD_TYPE,\n      name: condition.name,\n      predicate: condition\n    };\n  }\n\n  return condition;\n}\n\nfunction isObservable(value) {\n  try {\n    return 'subscribe' in value && isFunction(value.subscribe);\n  } catch (e) {\n    return false;\n  }\n}\n\nvar symbolObservable = /*#__PURE__*/function () {\n  return typeof Symbol === 'function' && Symbol.observable || '@@observable';\n}(); // TODO: to be removed in v5, left it out just to minimize the scope of the change and maintain compatibility with older versions of integration paackages\n\n\nvar interopSymbols = (_a = {}, _a[symbolObservable] = function () {\n  return this;\n}, _a[Symbol.observable] = function () {\n  return this;\n}, _a);\n\nfunction isMachine(value) {\n  return !!value && '__xstatenode' in value;\n}\n\nfunction isActor(value) {\n  return !!value && typeof value.send === 'function';\n}\n\nvar uniqueId = /*#__PURE__*/function () {\n  var currentId = 0;\n  return function () {\n    currentId++;\n    return currentId.toString(16);\n  };\n}();\n\nfunction toEventObject(event, payload // id?: TEvent['type']\n) {\n  if (isString(event) || typeof event === 'number') {\n    return __assign({\n      type: event\n    }, payload);\n  }\n\n  return event;\n}\n\nfunction toSCXMLEvent(event, scxmlEvent) {\n  if (!isString(event) && '$$type' in event && event.$$type === 'scxml') {\n    return event;\n  }\n\n  var eventObject = toEventObject(event);\n  return __assign({\n    name: eventObject.type,\n    data: eventObject,\n    $$type: 'scxml',\n    type: 'external'\n  }, scxmlEvent);\n}\n\nfunction toTransitionConfigArray(event, configLike) {\n  var transitions = toArrayStrict(configLike).map(function (transitionLike) {\n    if (typeof transitionLike === 'undefined' || typeof transitionLike === 'string' || isMachine(transitionLike)) {\n      return {\n        target: transitionLike,\n        event: event\n      };\n    }\n\n    return __assign(__assign({}, transitionLike), {\n      event: event\n    });\n  });\n  return transitions;\n}\n\nfunction normalizeTarget(target) {\n  if (target === undefined || target === TARGETLESS_KEY) {\n    return undefined;\n  }\n\n  return toArray(target);\n}\n\nfunction reportUnhandledExceptionOnInvocation(originalError, currentError, id) {\n  if (!IS_PRODUCTION) {\n    var originalStackTrace = originalError.stack ? \" Stacktrace was '\".concat(originalError.stack, \"'\") : '';\n\n    if (originalError === currentError) {\n      // tslint:disable-next-line:no-console\n      console.error(\"Missing onError handler for invocation '\".concat(id, \"', error was '\").concat(originalError, \"'.\").concat(originalStackTrace));\n    } else {\n      var stackTrace = currentError.stack ? \" Stacktrace was '\".concat(currentError.stack, \"'\") : ''; // tslint:disable-next-line:no-console\n\n      console.error(\"Missing onError handler and/or unhandled exception/promise rejection for invocation '\".concat(id, \"'. \") + \"Original error: '\".concat(originalError, \"'. \").concat(originalStackTrace, \" Current error is '\").concat(currentError, \"'.\").concat(stackTrace));\n    }\n  }\n}\n\nfunction evaluateGuard(machine, guard, context, _event, state) {\n  var guards = machine.options.guards;\n  var guardMeta = {\n    state: state,\n    cond: guard,\n    _event: _event\n  }; // TODO: do not hardcode!\n\n  if (guard.type === DEFAULT_GUARD_TYPE) {\n    return ((guards === null || guards === void 0 ? void 0 : guards[guard.name]) || guard.predicate)(context, _event.data, guardMeta);\n  }\n\n  var condFn = guards === null || guards === void 0 ? void 0 : guards[guard.type];\n\n  if (!condFn) {\n    throw new Error(\"Guard '\".concat(guard.type, \"' is not implemented on machine '\").concat(machine.id, \"'.\"));\n  }\n\n  return condFn(context, _event.data, guardMeta);\n}\n\nfunction toInvokeSource(src) {\n  if (typeof src === 'string') {\n    return {\n      type: src\n    };\n  }\n\n  return src;\n}\n\nfunction toObserver(nextHandler, errorHandler, completionHandler) {\n  if (typeof nextHandler === 'object') {\n    return nextHandler;\n  }\n\n  var noop = function noop() {\n    return void 0;\n  };\n\n  return {\n    next: nextHandler,\n    error: errorHandler || noop,\n    complete: completionHandler || noop\n  };\n}\n\nfunction createInvokeId(stateNodeId, index) {\n  return \"\".concat(stateNodeId, \":invocation[\").concat(index, \"]\");\n}\n\nexport { createInvokeId, evaluateGuard, flatten, getActionType, getEventType, interopSymbols, isActor, isArray, isBehavior, isBuiltInEvent, isFunction, isMachine, isObservable, isPromiseLike, isStateLike, isString, keys, mapContext, mapFilterValues, mapValues, matchesState, nestedPath, normalizeTarget, partition, path, pathToStateValue, pathsToStateValue, reportUnhandledExceptionOnInvocation, symbolObservable, toArray, toArrayStrict, toEventObject, toGuard, toInvokeSource, toObserver, toSCXMLEvent, toStatePath, toStatePaths, toStateValue, toTransitionConfigArray, uniqueId, updateContext, updateHistoryStates, updateHistoryValue, warn };","map":{"version":3,"names":["__values","__spreadArray","__read","__assign","DEFAULT_GUARD_TYPE","TARGETLESS_KEY","STATE_DELIMITER","IS_PRODUCTION","_a","keys","value","Object","matchesState","parentStateId","childStateId","delimiter","parentStateValue","toStateValue","childStateValue","isString","every","key","getEventType","event","concat","type","e","Error","getActionType","action","isFunction","name","toStatePath","stateId","isArray","toString","split","isStateLike","state","stateValue","pathToStateValue","statePath","length","marker","i","mapValues","collection","iteratee","result","collectionKeys","mapFilterValues","predicate","e_1","_b","_c","next","done","item","e_1_1","error","return","call","path","props","object","e_2","props_1","props_1_1","prop","e_2_1","nestedPath","accessorProp","e_3","props_2","props_2_1","e_3_1","toStatePaths","flatten","map","subStateValue","subPath","pathsToStateValue","paths","e_4","paths_1","paths_1_1","currentPath","e_4_1","array","apply","toArrayStrict","toArray","undefined","mapContext","mapper","context","_event","e_5","data","subMapper","e_5_1","isBuiltInEvent","eventType","test","isPromiseLike","Promise","then","isBehavior","transition","partition","items","e_6","truthy","falsy","items_1","items_1_1","push","e_6_1","updateHistoryStates","hist","states","subHist","current","updateHistoryValue","updateContext","assignActions","warn","updatedContext","reduce","acc","assignAction","e_7","assignment","meta","partialUpdate","propAssignment","e_7_1","assign","condition","message","console","args","Array","toGuard","guardMap","isObservable","subscribe","symbolObservable","Symbol","observable","interopSymbols","isMachine","isActor","send","uniqueId","currentId","toEventObject","payload","toSCXMLEvent","scxmlEvent","$$type","eventObject","toTransitionConfigArray","configLike","transitions","transitionLike","target","normalizeTarget","reportUnhandledExceptionOnInvocation","originalError","currentError","id","originalStackTrace","stack","stackTrace","evaluateGuard","machine","guard","guards","options","guardMeta","cond","condFn","toInvokeSource","src","toObserver","nextHandler","errorHandler","completionHandler","noop","complete","createInvokeId","stateNodeId","index"],"sources":["/project/xstate-getting-started/node_modules/xstate/es/utils.js"],"sourcesContent":["import { __values, __spreadArray, __read, __assign } from './_virtual/_tslib.js';\nimport { DEFAULT_GUARD_TYPE, TARGETLESS_KEY, STATE_DELIMITER } from './constants.js';\nimport { IS_PRODUCTION } from './environment.js';\n\nvar _a;\nfunction keys(value) {\n  return Object.keys(value);\n}\nfunction matchesState(parentStateId, childStateId, delimiter) {\n  if (delimiter === void 0) {\n    delimiter = STATE_DELIMITER;\n  }\n\n  var parentStateValue = toStateValue(parentStateId, delimiter);\n  var childStateValue = toStateValue(childStateId, delimiter);\n\n  if (isString(childStateValue)) {\n    if (isString(parentStateValue)) {\n      return childStateValue === parentStateValue;\n    } // Parent more specific than child\n\n\n    return false;\n  }\n\n  if (isString(parentStateValue)) {\n    return parentStateValue in childStateValue;\n  }\n\n  return Object.keys(parentStateValue).every(function (key) {\n    if (!(key in childStateValue)) {\n      return false;\n    }\n\n    return matchesState(parentStateValue[key], childStateValue[key]);\n  });\n}\nfunction getEventType(event) {\n  try {\n    return isString(event) || typeof event === 'number' ? \"\".concat(event) : event.type;\n  } catch (e) {\n    throw new Error('Events must be strings or objects with a string event.type property.');\n  }\n}\nfunction getActionType(action) {\n  try {\n    return isString(action) || typeof action === 'number' ? \"\".concat(action) : isFunction(action) ? action.name : action.type;\n  } catch (e) {\n    throw new Error('Actions must be strings or objects with a string action.type property.');\n  }\n}\nfunction toStatePath(stateId, delimiter) {\n  try {\n    if (isArray(stateId)) {\n      return stateId;\n    }\n\n    return stateId.toString().split(delimiter);\n  } catch (e) {\n    throw new Error(\"'\".concat(stateId, \"' is not a valid state path.\"));\n  }\n}\nfunction isStateLike(state) {\n  return typeof state === 'object' && 'value' in state && 'context' in state && 'event' in state && '_event' in state;\n}\nfunction toStateValue(stateValue, delimiter) {\n  if (isStateLike(stateValue)) {\n    return stateValue.value;\n  }\n\n  if (isArray(stateValue)) {\n    return pathToStateValue(stateValue);\n  }\n\n  if (typeof stateValue !== 'string') {\n    return stateValue;\n  }\n\n  var statePath = toStatePath(stateValue, delimiter);\n  return pathToStateValue(statePath);\n}\nfunction pathToStateValue(statePath) {\n  if (statePath.length === 1) {\n    return statePath[0];\n  }\n\n  var value = {};\n  var marker = value;\n\n  for (var i = 0; i < statePath.length - 1; i++) {\n    if (i === statePath.length - 2) {\n      marker[statePath[i]] = statePath[i + 1];\n    } else {\n      marker[statePath[i]] = {};\n      marker = marker[statePath[i]];\n    }\n  }\n\n  return value;\n}\nfunction mapValues(collection, iteratee) {\n  var result = {};\n  var collectionKeys = Object.keys(collection);\n\n  for (var i = 0; i < collectionKeys.length; i++) {\n    var key = collectionKeys[i];\n    result[key] = iteratee(collection[key], key, collection, i);\n  }\n\n  return result;\n}\nfunction mapFilterValues(collection, iteratee, predicate) {\n  var e_1, _a;\n\n  var result = {};\n\n  try {\n    for (var _b = __values(Object.keys(collection)), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var key = _c.value;\n      var item = collection[key];\n\n      if (!predicate(item)) {\n        continue;\n      }\n\n      result[key] = iteratee(item, key, collection);\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n\n  return result;\n}\n/**\r\n * Retrieves a value at the given path.\r\n * @param props The deep path to the prop of the desired value\r\n */\n\nvar path = function (props) {\n  return function (object) {\n    var e_2, _a;\n\n    var result = object;\n\n    try {\n      for (var props_1 = __values(props), props_1_1 = props_1.next(); !props_1_1.done; props_1_1 = props_1.next()) {\n        var prop = props_1_1.value;\n        result = result[prop];\n      }\n    } catch (e_2_1) {\n      e_2 = {\n        error: e_2_1\n      };\n    } finally {\n      try {\n        if (props_1_1 && !props_1_1.done && (_a = props_1.return)) _a.call(props_1);\n      } finally {\n        if (e_2) throw e_2.error;\n      }\n    }\n\n    return result;\n  };\n};\n/**\r\n * Retrieves a value at the given path via the nested accessor prop.\r\n * @param props The deep path to the prop of the desired value\r\n */\n\nfunction nestedPath(props, accessorProp) {\n  return function (object) {\n    var e_3, _a;\n\n    var result = object;\n\n    try {\n      for (var props_2 = __values(props), props_2_1 = props_2.next(); !props_2_1.done; props_2_1 = props_2.next()) {\n        var prop = props_2_1.value;\n        result = result[accessorProp][prop];\n      }\n    } catch (e_3_1) {\n      e_3 = {\n        error: e_3_1\n      };\n    } finally {\n      try {\n        if (props_2_1 && !props_2_1.done && (_a = props_2.return)) _a.call(props_2);\n      } finally {\n        if (e_3) throw e_3.error;\n      }\n    }\n\n    return result;\n  };\n}\nfunction toStatePaths(stateValue) {\n  if (!stateValue) {\n    return [[]];\n  }\n\n  if (isString(stateValue)) {\n    return [[stateValue]];\n  }\n\n  var result = flatten(Object.keys(stateValue).map(function (key) {\n    var subStateValue = stateValue[key];\n\n    if (typeof subStateValue !== 'string' && (!subStateValue || !Object.keys(subStateValue).length)) {\n      return [[key]];\n    }\n\n    return toStatePaths(stateValue[key]).map(function (subPath) {\n      return [key].concat(subPath);\n    });\n  }));\n  return result;\n}\nfunction pathsToStateValue(paths) {\n  var e_4, _a;\n\n  var result = {};\n\n  if (paths && paths.length === 1 && paths[0].length === 1) {\n    return paths[0][0];\n  }\n\n  try {\n    for (var paths_1 = __values(paths), paths_1_1 = paths_1.next(); !paths_1_1.done; paths_1_1 = paths_1.next()) {\n      var currentPath = paths_1_1.value;\n      var marker = result; // tslint:disable-next-line:prefer-for-of\n\n      for (var i = 0; i < currentPath.length; i++) {\n        var subPath = currentPath[i];\n\n        if (i === currentPath.length - 2) {\n          marker[subPath] = currentPath[i + 1];\n          break;\n        }\n\n        marker[subPath] = marker[subPath] || {};\n        marker = marker[subPath];\n      }\n    }\n  } catch (e_4_1) {\n    e_4 = {\n      error: e_4_1\n    };\n  } finally {\n    try {\n      if (paths_1_1 && !paths_1_1.done && (_a = paths_1.return)) _a.call(paths_1);\n    } finally {\n      if (e_4) throw e_4.error;\n    }\n  }\n\n  return result;\n}\nfunction flatten(array) {\n  var _a;\n\n  return (_a = []).concat.apply(_a, __spreadArray([], __read(array), false));\n}\nfunction toArrayStrict(value) {\n  if (isArray(value)) {\n    return value;\n  }\n\n  return [value];\n}\nfunction toArray(value) {\n  if (value === undefined) {\n    return [];\n  }\n\n  return toArrayStrict(value);\n}\nfunction mapContext(mapper, context, _event) {\n  var e_5, _a;\n\n  if (isFunction(mapper)) {\n    return mapper(context, _event.data);\n  }\n\n  var result = {};\n\n  try {\n    for (var _b = __values(Object.keys(mapper)), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var key = _c.value;\n      var subMapper = mapper[key];\n\n      if (isFunction(subMapper)) {\n        result[key] = subMapper(context, _event.data);\n      } else {\n        result[key] = subMapper;\n      }\n    }\n  } catch (e_5_1) {\n    e_5 = {\n      error: e_5_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n    } finally {\n      if (e_5) throw e_5.error;\n    }\n  }\n\n  return result;\n}\nfunction isBuiltInEvent(eventType) {\n  return /^(done|error)\\./.test(eventType);\n}\nfunction isPromiseLike(value) {\n  if (value instanceof Promise) {\n    return true;\n  } // Check if shape matches the Promise/A+ specification for a \"thenable\".\n\n\n  if (value !== null && (isFunction(value) || typeof value === 'object') && isFunction(value.then)) {\n    return true;\n  }\n\n  return false;\n}\nfunction isBehavior(value) {\n  return value !== null && typeof value === 'object' && 'transition' in value && typeof value.transition === 'function';\n}\nfunction partition(items, predicate) {\n  var e_6, _a;\n\n  var _b = __read([[], []], 2),\n      truthy = _b[0],\n      falsy = _b[1];\n\n  try {\n    for (var items_1 = __values(items), items_1_1 = items_1.next(); !items_1_1.done; items_1_1 = items_1.next()) {\n      var item = items_1_1.value;\n\n      if (predicate(item)) {\n        truthy.push(item);\n      } else {\n        falsy.push(item);\n      }\n    }\n  } catch (e_6_1) {\n    e_6 = {\n      error: e_6_1\n    };\n  } finally {\n    try {\n      if (items_1_1 && !items_1_1.done && (_a = items_1.return)) _a.call(items_1);\n    } finally {\n      if (e_6) throw e_6.error;\n    }\n  }\n\n  return [truthy, falsy];\n}\nfunction updateHistoryStates(hist, stateValue) {\n  return mapValues(hist.states, function (subHist, key) {\n    if (!subHist) {\n      return undefined;\n    }\n\n    var subStateValue = (isString(stateValue) ? undefined : stateValue[key]) || (subHist ? subHist.current : undefined);\n\n    if (!subStateValue) {\n      return undefined;\n    }\n\n    return {\n      current: subStateValue,\n      states: updateHistoryStates(subHist, subStateValue)\n    };\n  });\n}\nfunction updateHistoryValue(hist, stateValue) {\n  return {\n    current: stateValue,\n    states: updateHistoryStates(hist, stateValue)\n  };\n}\nfunction updateContext(context, _event, assignActions, state) {\n  if (!IS_PRODUCTION) {\n    warn(!!context, 'Attempting to update undefined context');\n  }\n\n  var updatedContext = context ? assignActions.reduce(function (acc, assignAction) {\n    var e_7, _a;\n\n    var assignment = assignAction.assignment;\n    var meta = {\n      state: state,\n      action: assignAction,\n      _event: _event\n    };\n    var partialUpdate = {};\n\n    if (isFunction(assignment)) {\n      partialUpdate = assignment(acc, _event.data, meta);\n    } else {\n      try {\n        for (var _b = __values(Object.keys(assignment)), _c = _b.next(); !_c.done; _c = _b.next()) {\n          var key = _c.value;\n          var propAssignment = assignment[key];\n          partialUpdate[key] = isFunction(propAssignment) ? propAssignment(acc, _event.data, meta) : propAssignment;\n        }\n      } catch (e_7_1) {\n        e_7 = {\n          error: e_7_1\n        };\n      } finally {\n        try {\n          if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        } finally {\n          if (e_7) throw e_7.error;\n        }\n      }\n    }\n\n    return Object.assign({}, acc, partialUpdate);\n  }, context) : context;\n  return updatedContext;\n} // tslint:disable-next-line:no-empty\n\nvar warn = function () {};\n\nif (!IS_PRODUCTION) {\n  warn = function (condition, message) {\n    var error = condition instanceof Error ? condition : undefined;\n\n    if (!error && condition) {\n      return;\n    }\n\n    if (console !== undefined) {\n      var args = [\"Warning: \".concat(message)];\n\n      if (error) {\n        args.push(error);\n      } // tslint:disable-next-line:no-console\n\n\n      console.warn.apply(console, args);\n    }\n  };\n}\nfunction isArray(value) {\n  return Array.isArray(value);\n} // tslint:disable-next-line:ban-types\n\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\nfunction isString(value) {\n  return typeof value === 'string';\n}\nfunction toGuard(condition, guardMap) {\n  if (!condition) {\n    return undefined;\n  }\n\n  if (isString(condition)) {\n    return {\n      type: DEFAULT_GUARD_TYPE,\n      name: condition,\n      predicate: guardMap ? guardMap[condition] : undefined\n    };\n  }\n\n  if (isFunction(condition)) {\n    return {\n      type: DEFAULT_GUARD_TYPE,\n      name: condition.name,\n      predicate: condition\n    };\n  }\n\n  return condition;\n}\nfunction isObservable(value) {\n  try {\n    return 'subscribe' in value && isFunction(value.subscribe);\n  } catch (e) {\n    return false;\n  }\n}\nvar symbolObservable = /*#__PURE__*/function () {\n  return typeof Symbol === 'function' && Symbol.observable || '@@observable';\n}(); // TODO: to be removed in v5, left it out just to minimize the scope of the change and maintain compatibility with older versions of integration paackages\n\nvar interopSymbols = (_a = {}, _a[symbolObservable] = function () {\n  return this;\n}, _a[Symbol.observable] = function () {\n  return this;\n}, _a);\nfunction isMachine(value) {\n  return !!value && '__xstatenode' in value;\n}\nfunction isActor(value) {\n  return !!value && typeof value.send === 'function';\n}\nvar uniqueId = /*#__PURE__*/function () {\n  var currentId = 0;\n  return function () {\n    currentId++;\n    return currentId.toString(16);\n  };\n}();\nfunction toEventObject(event, payload // id?: TEvent['type']\n) {\n  if (isString(event) || typeof event === 'number') {\n    return __assign({\n      type: event\n    }, payload);\n  }\n\n  return event;\n}\nfunction toSCXMLEvent(event, scxmlEvent) {\n  if (!isString(event) && '$$type' in event && event.$$type === 'scxml') {\n    return event;\n  }\n\n  var eventObject = toEventObject(event);\n  return __assign({\n    name: eventObject.type,\n    data: eventObject,\n    $$type: 'scxml',\n    type: 'external'\n  }, scxmlEvent);\n}\nfunction toTransitionConfigArray(event, configLike) {\n  var transitions = toArrayStrict(configLike).map(function (transitionLike) {\n    if (typeof transitionLike === 'undefined' || typeof transitionLike === 'string' || isMachine(transitionLike)) {\n      return {\n        target: transitionLike,\n        event: event\n      };\n    }\n\n    return __assign(__assign({}, transitionLike), {\n      event: event\n    });\n  });\n  return transitions;\n}\nfunction normalizeTarget(target) {\n  if (target === undefined || target === TARGETLESS_KEY) {\n    return undefined;\n  }\n\n  return toArray(target);\n}\nfunction reportUnhandledExceptionOnInvocation(originalError, currentError, id) {\n  if (!IS_PRODUCTION) {\n    var originalStackTrace = originalError.stack ? \" Stacktrace was '\".concat(originalError.stack, \"'\") : '';\n\n    if (originalError === currentError) {\n      // tslint:disable-next-line:no-console\n      console.error(\"Missing onError handler for invocation '\".concat(id, \"', error was '\").concat(originalError, \"'.\").concat(originalStackTrace));\n    } else {\n      var stackTrace = currentError.stack ? \" Stacktrace was '\".concat(currentError.stack, \"'\") : ''; // tslint:disable-next-line:no-console\n\n      console.error(\"Missing onError handler and/or unhandled exception/promise rejection for invocation '\".concat(id, \"'. \") + \"Original error: '\".concat(originalError, \"'. \").concat(originalStackTrace, \" Current error is '\").concat(currentError, \"'.\").concat(stackTrace));\n    }\n  }\n}\nfunction evaluateGuard(machine, guard, context, _event, state) {\n  var guards = machine.options.guards;\n  var guardMeta = {\n    state: state,\n    cond: guard,\n    _event: _event\n  }; // TODO: do not hardcode!\n\n  if (guard.type === DEFAULT_GUARD_TYPE) {\n    return ((guards === null || guards === void 0 ? void 0 : guards[guard.name]) || guard.predicate)(context, _event.data, guardMeta);\n  }\n\n  var condFn = guards === null || guards === void 0 ? void 0 : guards[guard.type];\n\n  if (!condFn) {\n    throw new Error(\"Guard '\".concat(guard.type, \"' is not implemented on machine '\").concat(machine.id, \"'.\"));\n  }\n\n  return condFn(context, _event.data, guardMeta);\n}\nfunction toInvokeSource(src) {\n  if (typeof src === 'string') {\n    return {\n      type: src\n    };\n  }\n\n  return src;\n}\nfunction toObserver(nextHandler, errorHandler, completionHandler) {\n  if (typeof nextHandler === 'object') {\n    return nextHandler;\n  }\n\n  var noop = function () {\n    return void 0;\n  };\n\n  return {\n    next: nextHandler,\n    error: errorHandler || noop,\n    complete: completionHandler || noop\n  };\n}\nfunction createInvokeId(stateNodeId, index) {\n  return \"\".concat(stateNodeId, \":invocation[\").concat(index, \"]\");\n}\n\nexport { createInvokeId, evaluateGuard, flatten, getActionType, getEventType, interopSymbols, isActor, isArray, isBehavior, isBuiltInEvent, isFunction, isMachine, isObservable, isPromiseLike, isStateLike, isString, keys, mapContext, mapFilterValues, mapValues, matchesState, nestedPath, normalizeTarget, partition, path, pathToStateValue, pathsToStateValue, reportUnhandledExceptionOnInvocation, symbolObservable, toArray, toArrayStrict, toEventObject, toGuard, toInvokeSource, toObserver, toSCXMLEvent, toStatePath, toStatePaths, toStateValue, toTransitionConfigArray, uniqueId, updateContext, updateHistoryStates, updateHistoryValue, warn };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}